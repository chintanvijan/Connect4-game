<!DOCTYPE html>
<html>
<head>
	<title>Connect 4</title>
	<script type="text/javascript">
		var arr = [[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]];
		var c=1;
	</script>


	<script type="text/javascript">
		function func(n,c){
			st = 1;
			win = 0;
			for (var i = arr[n].length - 1; i >= 0; i--) {
				if(arr[n][i]==0){
					arr[n][i]=c;
					st=0;
					break;
				}
			}
			if (st==1){
				alert('Invalid Move!');
			}
			else{
				if (i<=2){
					if((arr[n][i+1]==c)&&(arr[n][i+2]==c)&&(arr[n][i+3]==c)){
						win = 1;
					}
				}else if(i>2){
					if((arr[n][i-1]==c)&&(arr[n][i-2]==c)&&(arr[n][i-3]==c)){
						win = 1;
					}
				}

				if(win==0){
					// if((n==3)||(n==4)){
					// 	if(((arr[n-3][i]==c)&&(arr[n-2][i]==c)&&(arr[n-1][i]==c))||((arr[n+3][i]==c)&&(arr[n+2][i]==c)&&(arr[n+1][i]==c))){
					// 		win = 1;
					// 	}
					// }else if(n<3){
					// 	if((arr[n+3][i]==c)&&(arr[n+2][i]==c)&&(arr[n+1][i]==c)){
					// 		win = 1;
					// 	}
					// }else if(n>4){
					// 	if((arr[n-3][i]==c)&&(arr[n-2][i]==c)&&(arr[n-1][i]==c)){
					// 		win = 1;
					// 	}
					// }

					var arr1 = [arr[0][i],arr[1][i],arr[2][i],arr[3][i],arr[4][i],arr[5][i],arr[6][i]];

					for(var i=0;i<arr1.length;i++){
						if(arr1[i]!=c){
							continue;
						}
						len = 0;
						for(var j=i+1;i<arr1.length;j++){
							if(arr1[j]==c){
								len+=1;
							}else{
								break;
							}
							if(len==4){
								win=1;
								break;
							}

						}

						if(win==1){
							break;
						}
					
					}

				}

				// if(win==0){
				// 	if(n==0){
				// 		if(i==0){
				// 			arr2 = [arr[0][0],arr[1][1],arr[2][2],arr[3][3],arr[4][4],arr[5][5]];
				// 		}
				// 		if(i==1){
				// 			arr2 = [arr[0][1],arr[1][2],arr[2][3],arr[3][4],arr[4][5];
				// 		}
				// 		if(i==2){
				// 			arr2 = [arr[0][2],arr[1][3],arr[2][4],arr[3][5]];
				// 		}
				// 		if(i==3){
				// 			arr2 = [arr[0][3],arr[1][2],arr[2][1],arr[3][0]];
				// 		}
				// 		if(i==4){
				// 			arr2 = [arr[0][4],arr[1][3],arr[2][2],arr[3][1],arr[4][0]];
				// 		}
				// 		if(i==5){
				// 			arr2 = [arr[0][5],arr[1][4],arr[2][3],arr[3][2],arr[4][1],arr[5][0]];
				// 		}
				// 	}

				// 	if(n==1){
				// 		if(i==0){
				// 			arr2 = [arr[1][0],arr[2][1],arr[3][2],arr[4][3],arr[5][4],arr[6][5]];
				// 		}
				// 		if(i==1){
				// 			arr2 = [arr[1][1],arr[2][2],arr[3][3],arr[4][4],arr[5][5]];
				// 		}
				// 		if(i==2){
				// 			arr2 = [arr[1][2],arr[2][3],arr[3][4],arr[4][5]];
				// 		}
				// 		if(i==3){
				// 			arr2 = [arr[1][3],arr[2][2],arr[3][1],arr[4][0]];
				// 		}
				// 		if(i==4){
				// 			arr2 = [arr[1][4],arr[2][3],arr[3][2],arr[4][1],arr[5][0]];
				// 		}
				// 		if(i==5){
				// 			arr2 = [arr[1][5],arr[2][4],arr[3][3],arr[4][2],arr[5][1],arr[6][0]];
				// 		}

				// 	}

				// 	if(n==2){
				// 		if(i==0){
				// 			arr2 = [arr[2][0],arr[3][1],arr[4][2],arr[5][3],arr[6][4]];
				// 		}
				// 		if(i==1){
				// 			arr2 = [arr[2][1],arr[3][2],arr[4][3],arr[5][4],arr[6][5]];
				// 		}
				// 		if(i==2){
				// 			arr2 = [arr[1][2],arr[2][3],arr[3][4],arr[4][5]];
				// 		}
				// 		if(i==3){
				// 			arr2 = [arr[1][3],arr[2][2],arr[3][1],arr[4][0]];
				// 		}
				// 		if(i==4){
				// 			arr2 = [arr[1][4],arr[2][3],arr[3][2],arr[4][1],arr[5][0]];
				// 		}
				// 		if(i==5){
				// 			arr2 = [arr[1][5],arr[2][4],arr[3][3],arr[4][2],arr[5][1],arr[6][0]];
				// 		}

				// 	}



				// }

			}
			if (win==1){
				// alert('Player '+c.toString()+' wins !');
				console.log(c);
				window.location.replace(window.location.href+'/'+c.toString());

			}
			else{
				if(c==1){
					c=c+1;
				}
				else{
					c=c-1;
				}
			}
		}
	</script>



</head>
<body>
	{% if messages %}
		{% for message in messages %}
			<div>{{message}}</div>
		{% endfor %}
	{% endif %}
	<form action="{% url 'home' %}" method="GET">
		<button name="start">Start</button>
	</form>
	<button name="1" onclick="func(0,c)">1</button>
	<button name="2" onclick="func(1,c)">2</button>
	<button name="3" onclick="func(2,c)">3</button>
	<button name="4" onclick="func(3,c)">4</button>
	<button name="5" onclick="func(4,c)">5</button>
	<button name="6" onclick="func(5,c)">6</button>
	<button name="7" onclick="func(6,c)">7</button>



</body>


</html>